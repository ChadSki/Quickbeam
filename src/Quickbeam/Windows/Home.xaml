<custom:MetroWindow x:Class="Quickbeam.Windows.Home"
                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                    xmlns:sys="clr-namespace:System;assembly=mscorlib"
                    xmlns:custom="clr-namespace:Quickbeam.Metro.Controls.Custom"
                    xmlns:vectors="clr-namespace:Quickbeam.Metro.Vectors"
                    xmlns:viewModels="clr-namespace:Quickbeam.ViewModels"
                    WindowStartupLocation="CenterScreen"
                    Width="1130" Height="640"
                    MinWidth="380" MinHeight="84"
                    AllowsTransparency="False"
                    WindowStyle="None"
                    SnapsToDevicePixels="True"
                    UseLayoutRounding="False">
    <Window.Resources>
        <sys:Double x:Key="CaptionHeight">60</sys:Double>
        <sys:Double x:Key="StatusHeight">23</sys:Double>
        <Thickness x:Key="FallbackBorderThickness"
                   Top="1" Left="1" Right="1" Bottom="{StaticResource StatusHeight}" />
    </Window.Resources>

    <WindowChrome.WindowChrome>
        <!-- Provides Aero Snap and draggable titlebar functionality.
        Use WindowChrome.IsHitTestVisibleInChrome="True" to allow elements in the titlebar to be clickable.
        Do not set ResizeMode="None", this takes care of removing the resize border. -->
        <WindowChrome CaptionHeight="{StaticResource CaptionHeight}"
                      CornerRadius="0"
                      GlassFrameThickness="0"
                      ResizeBorderThickness="0" />
    </WindowChrome.WindowChrome>

    <Grid x:Name="BorderGrid" Background="{DynamicResource MainBackgroundBrush}">
        <Border BorderThickness="{Binding Path=ApplicationBorderThickness, FallbackValue={StaticResource FallbackBorderThickness}}"
                BorderBrush="{DynamicResource AssemblyAccentBrush}">
            <Grid x:Name="MainGrid">
                <Grid.RowDefinitions>
                    <RowDefinition Height="{Binding Source={StaticResource CaptionHeight}}" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!-- Logo -->
                <Path IsHitTestVisible="False" Fill="{DynamicResource AssemblyAccentBrush}" Stretch="Fill"
                  Data="M898,1859C845,1855 757,1844 703,1835 613,1820 602,1816 571,1783 545,1755 518,1742 441,1718 307,1676 184,1611 106,1538 14,1454 12,1448 59,1411L98,1380 157,1437C295,1574 516,1650 860,1680 923,1685 1001,1690 1034,1690L1093,1690 1037,1628C1006,1593 977,1566 971,1567 966,1569 936,1542 906,1507L850,1445 901,1442C946,1439,957,1442,982,1467L1012,1495 1091,1410C1134,1363 1170,1323 1170,1320 1170,1317 1099,1316 1013,1318 926,1320 846,1319 835,1316 824,1313 807,1297 797,1280 780,1253 774,1250 726,1250L674,1250 531,1090 388,930 339,930 290,930 290,890 290,850 414,850C535,850 539,849 542,828 545,803 575,795 775,764 864,750 893,741 929,717L974,687 1189,698C1812,733,2092,844,2291,1135L2345,1215 2448,1218 2550,1221 2550,1260 2550,1300 2457,1300C2344,1300 2330,1308 2290,1396 2222,1547 2049,1671 1781,1760 1510,1851 1207,1885 898,1859z M1332,1679C1673,1642 1964,1475 1987,1302 1994,1246 1967,1171 1920,1117 1869,1059 1783,1003 1765,1016 1746,1029 1140,1678 1140,1685 1140,1693 1221,1691 1332,1679z M1406,1068L1522,935 1486,932C1456,929 1450,925 1450,906 1450,886 1443,881 1393,871 1361,865 1277,855 1205,849 1067,837 842,848 690,875L615,887 748,889C873,890 880,891 880,910 880,929 873,930 789,930 739,930 700,934 702,939 704,944 753,1004 813,1074L920,1200 1105,1200 1289,1200 1406,1068z"
                  Margin="6.443,3,0,0" Width="33.557" Height="33.557" VerticalAlignment="Top" HorizontalAlignment="Left"
                  RenderTransformOrigin="0.5,0.5">
                    <Path.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform ScaleY="-0.5" />
                        </TransformGroup>
                    </Path.RenderTransform>
                </Path>

                <!-- Title -->
                <TextBlock Text="Quickbeam" IsHitTestVisible="False" Foreground="{DynamicResource TextBrushSecondary}"
                           FontSize="15" FontFamily="{DynamicResource MetroFontLight}" TextTrimming="CharacterEllipsis"
                           Margin="45,9.6,0,0"/>

                <!-- Window Buttons -->
                <StackPanel Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Right" Height="26"
                            WindowChrome.IsHitTestVisibleInChrome="True">
                    <Button x:Name="WindowMinimizeButton" ToolTip="Minimize" Style="{DynamicResource WindowActionButton}"
                            Click="WindowMinimizeButton_OnClick">
                        <vectors:MinimizeModule />
                    </Button>
                    <Button x:Name="WindowRestoreButton" ToolTip="Restore" Style="{DynamicResource WindowActionButton}"
                            Visibility="{Binding Path=ActionRestoreVisibility, FallbackValue=Visible}"
                            Click="WindowRestoreButton_OnClick">
                        <vectors:RestoreModule />
                    </Button>
                    <Button x:Name="WindowMaximizeButton" ToolTip="Maximize" Style="{DynamicResource WindowActionButton}"
                            Visibility="{Binding Path=ActionMaximizeVisibility, FallbackValue=Visible}"
                            Click="WindowMaximizeButton_OnClick">
                        <vectors:MaximizeModule />
                    </Button>
                    <Button x:Name="WindowCloseButton" ToolTip="Close" Style="{DynamicResource WindowActionButton}"
                            Click="WindowCloseButton_OnClick">
                        <vectors:CloseModule />
                    </Button>
                </StackPanel>

                <!-- Menu -->
                <Menu HorizontalAlignment="Left" Margin="2,34,0,6" Background="{x:Null}" Foreground="{x:Null}"
                      WindowChrome.IsHitTestVisibleInChrome="True">
                    <MenuItem Header="FILE" Foreground="White" FontFamily="{DynamicResource MetroFontLight}">
                        <MenuItem Header="Exit" FontFamily="{DynamicResource MetroFontLight}" />
                    </MenuItem>
                    <MenuItem Header="HELP" Foreground="White" FontFamily="{DynamicResource MetroFontLight}">
                        <MenuItem Header="About Quickbeam" />
                    </MenuItem>
                </Menu>

                <Rectangle Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Bottom"
                           Fill="{DynamicResource AssemblyAccentBrush}" Height="2" SnapsToDevicePixels="True"/>

                <ContentPresenter Grid.Row="1" Name="ContentPresenter" Content="{Binding Path=AssemblyPage}" />
            </Grid>
        </Border>

        <TextBlock Grid.Row="2" x:Name="StatusTextBlock" Foreground="White" 
                   Text="{Binding Path=Status, FallbackValue=Ready...}" 
                   VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="4,0,0,4"/>

        <Grid x:Name="ResizingGrid" Visibility="{Binding Path=ResizingVisibility, FallbackValue=Visible}">
            <Grid.Resources>
                <sys:Double x:Key="NormalThumbSize">6</sys:Double>
                <sys:Double x:Key="CornerThumbSize">12</sys:Double>
                <!-- use key "StatusHeight" for bottom edge -->
                <Thickness x:Key="TopThumbMargin" Top="0" Bottom="0"
                           Left="{StaticResource CornerThumbSize}"
                           Right="{StaticResource CornerThumbSize}" />
                <Thickness x:Key="BottomThumbMargin" Top="0" Bottom="0"
                           Left="{StaticResource StatusHeight}"
                           Right="{StaticResource StatusHeight}" />
                <Thickness x:Key="LeftThumbMargin" Left="0" Right="0"
                           Top="{StaticResource CornerThumbSize}"
                           Bottom="{StaticResource StatusHeight}" />
                <Thickness x:Key="RightThumbMargin" Left="0" Right="0"
                           Top="{StaticResource CornerThumbSize}"
                           Bottom="{StaticResource StatusHeight}" />
            </Grid.Resources>

            <vectors:ResizeModule VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,5,5" />

            <Thumb x:Name="ResizeTopThumb" Opacity="0" Background="{x:Null}" Foreground="{x:Null}"
                   Height="{StaticResource NormalThumbSize}" Margin="{StaticResource TopThumbMargin}"
                   VerticalAlignment="Top" HorizontalAlignment="Stretch" Cursor="SizeNS"
                   WindowChrome.IsHitTestVisibleInChrome="True"
                   PreviewMouseLeftButtonDown="ResizeTop"/>

            <Thumb x:Name="ResizeBottomThumb" Opacity="0" Background="{x:Null}" Foreground="{x:Null}"
                   Height="{StaticResource CornerThumbSize}" Margin="{StaticResource BottomThumbMargin}"
                   VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Cursor="SizeNS"
                   WindowChrome.IsHitTestVisibleInChrome="True"
                   PreviewMouseLeftButtonDown="ResizeBottom"/>

            <Thumb x:Name="ResizeLeftThumb" Opacity="0" Background="{x:Null}" Foreground="{x:Null}"
                   Width="{StaticResource NormalThumbSize}" Margin="{StaticResource LeftThumbMargin}"
                   VerticalAlignment="Stretch" HorizontalAlignment="Left" Cursor="SizeWE"
                   WindowChrome.IsHitTestVisibleInChrome="True"
                   PreviewMouseLeftButtonDown="ResizeLeft"/>

            <Thumb x:Name="ResizeRightThumb" Opacity="0" Background="{x:Null}" Foreground="{x:Null}"
                   Width="{StaticResource NormalThumbSize}" Margin="{StaticResource RightThumbMargin}"
                   VerticalAlignment="Stretch" HorizontalAlignment="Right" Cursor="SizeWE"
                   WindowChrome.IsHitTestVisibleInChrome="True"
                   PreviewMouseLeftButtonDown="ResizeRight"/>

            <Thumb x:Name="ResizeTopLeftThumb" Opacity="0" Background="{x:Null}" Foreground="{x:Null}"
                   Width="{StaticResource CornerThumbSize}" Height="{StaticResource CornerThumbSize}"
                   VerticalAlignment="Top" HorizontalAlignment="Left" Cursor="SizeNWSE"
                   WindowChrome.IsHitTestVisibleInChrome="True"
                   PreviewMouseLeftButtonDown="ResizeTopLeft"/>

            <Thumb x:Name="ResizeTopRightThumb" Opacity="0" Background="{x:Null}" Foreground="{x:Null}"
                   Width="{StaticResource CornerThumbSize}" Height="{StaticResource NormalThumbSize}"
                   VerticalAlignment="Top" HorizontalAlignment="Right" Cursor="SizeNESW"
                   WindowChrome.IsHitTestVisibleInChrome="True"
                   PreviewMouseLeftButtonDown="ResizeTopRight"/>

            <Thumb x:Name="ResizeTopRightThumb2" Opacity="0" Background="{x:Null}" Foreground="{x:Null}"
                   Width="{StaticResource NormalThumbSize}" Height="{StaticResource CornerThumbSize}"
                   VerticalAlignment="Top" HorizontalAlignment="Right" Cursor="SizeNESW"
                   WindowChrome.IsHitTestVisibleInChrome="True"
                   PreviewMouseLeftButtonDown="ResizeTopRight"/>

            <Thumb x:Name="ResizeBottomLeftThumb" Opacity="0" Background="{x:Null}" Foreground="{x:Null}"
                   Width="{StaticResource StatusHeight}" Height="{StaticResource StatusHeight}"
                   VerticalAlignment="Bottom" HorizontalAlignment="Left" Cursor="SizeNESW"
                   WindowChrome.IsHitTestVisibleInChrome="True"
                   PreviewMouseLeftButtonDown="ResizeBottomLeft"/>

            <Thumb x:Name="ResizeBottomRightThumb" Opacity="0" Background="{x:Null}" Foreground="{x:Null}"
                   Width="{StaticResource StatusHeight}" Height="{StaticResource StatusHeight}"
                   VerticalAlignment="Bottom" HorizontalAlignment="Right" Cursor="SizeNWSE"
                   WindowChrome.IsHitTestVisibleInChrome="True"
                   PreviewMouseLeftButtonDown="ResizeBottomRight"/>
        </Grid>

        <Rectangle Opacity="0.65" Fill="{DynamicResource HomeOpacityBrush}" Grid.RowSpan="3"
                   Visibility="{Binding Path=MaskVisibility, FallbackValue=Collapsed}" />
    </Grid>
</custom:MetroWindow>
